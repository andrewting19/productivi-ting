<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>REJECT BRAINROT</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Main Settings View -->
    <div id="settings-view" class="view">
      <h1>REJECT BRAINROT</h1>

      <div class="status-bar" id="status-bar">
        <span class="status-dot active"></span>
        <span id="status-text">Active</span>
      </div>

      <section class="setting-group">
        <h2>Filter Type</h2>
        <div class="toggle-group">
          <button class="toggle-btn active" data-filter="red">Red</button>
          <button class="toggle-btn" data-filter="grayscale">Grayscale</button>
        </div>
      </section>

      <section class="setting-group">
        <h2>Intensity</h2>
        <div class="toggle-group">
          <button class="toggle-btn" data-intensity="low">Low</button>
          <button class="toggle-btn active" data-intensity="medium">Medium</button>
          <button class="toggle-btn" data-intensity="high">High</button>
        </div>
      </section>

      <section class="setting-group">
        <h2>Blocked Sites</h2>
        <div class="site-list" id="site-list">
          <!-- Sites will be populated by JS -->
        </div>
        <div class="add-site">
          <input type="text" id="new-site" placeholder="example.com">
          <button id="add-site-btn">Add</button>
        </div>
      </section>

      <section class="setting-group">
        <h2>Take a Break</h2>
        <p class="hint">Need to disable? Complete a focus challenge first.</p>
        <div class="break-buttons">
          <button class="break-btn" data-duration="5">5 min break</button>
          <button class="break-btn" data-duration="end">Done for today</button>
        </div>
      </section>
    </div>

    <!-- Challenge View -->
    <div id="challenge-view" class="view hidden">
      <h1>Focus Challenge</h1>
      <p class="challenge-intro" id="challenge-intro">Complete these steps to take a break.</p>

      <!-- Step 1: Math -->
      <div class="challenge-step" id="step-math">
        <h2>Step 1: Quick Math</h2>
        <p class="math-problem" id="math-problem"></p>
        <input type="number" id="math-answer" placeholder="Your answer">
        <button id="math-submit">Check</button>
        <p class="feedback" id="math-feedback"></p>
      </div>

      <!-- Step 2: Typing -->
      <div class="challenge-step hidden" id="step-typing">
        <h2>Step 2: Type This</h2>
        <p class="typing-prompt" id="typing-prompt"></p>
        <textarea id="typing-input" placeholder="Type the text above exactly..."></textarea>
        <p class="feedback" id="typing-feedback"></p>
      </div>

      <!-- Step 3: Wait -->
      <div class="challenge-step hidden" id="step-wait">
        <h2>Step 3: Pause &amp; Reflect</h2>
        <div class="timer-display">
          <span id="timer-count">15</span>
          <span>seconds</span>
        </div>
        <p class="encouragement" id="encouragement"></p>
      </div>

      <!-- Success -->
      <div class="challenge-step hidden" id="step-success">
        <h2>Challenge Complete!</h2>
        <p id="success-message"></p>
        <button id="confirm-break">Take Break</button>
        <button id="cancel-break" class="secondary">Stay Focused</button>
      </div>

      <button id="challenge-cancel" class="cancel-btn">Cancel</button>
    </div>

    <!-- Remove Site Challenge (simpler) -->
    <div id="remove-challenge-view" class="view hidden">
      <h1>Remove Site</h1>
      <p>To remove <strong id="site-to-remove"></strong>, solve this:</p>
      <p class="math-problem" id="remove-math-problem"></p>
      <input type="number" id="remove-math-answer" placeholder="Your answer">
      <button id="remove-math-submit">Remove Site</button>
      <p class="feedback" id="remove-feedback"></p>
      <button id="remove-cancel" class="cancel-btn">Cancel</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
